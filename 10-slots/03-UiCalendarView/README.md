# UiCalendarView

## Формирование ячеек календаря

Как и в прошлой версии задачи, потребуется сгенерировать данные, определяющие отображение ячеек календаря. Это может
быть массив объектов для последовательного описания каждой ячейки текущего месяца с его датой, месяцем и другими
значениями при необходимости.

## Передавать ли данные для отображения через входной параметр календаря?

В компонентах, которые выводят список данных, таких как список (простой, с пагинацией, бесконечный), таблицы - удобно
сразу передать весь массив данных. В таких компонентах список данных выводится списком элементов, то есть список
отображается в список. Но в календаре отображение сложнее. Для вывода данных в ячейке нужно находить данные, относящиеся
к ячейке по дате. Это сложно сделать также универсально. Для хранения последовательных данных есть массивы, но данные с
датами всегда будут в нашем формате.

Есть при подхода к разработке такого компонента:

1. Передавать данные, но создавать ограничения на формат этих данных. Например, обязывать пользователя передавать данные
   массивом объектов, где дата хранится в поле `date` в формате `Unix Timestamp`.
   - Такое решение накладывает ограничение на пользователя компонента и плохо применяется для задач, в которых нет
     конкретных дат (например, ежегодные праздники)...
2. Передавать данные и отдельно передавать функцию соответствия элемента данных некоторому дню.
   - Универсально, но может быть неудобно или оптимально в использовании...
3. Не передавать данные в компонент вообще. Вместо этого в параметрах слота передавать пользователю компонента всё
   необходимое для самостоятельного поиска данных.
   - Наиболее универсальное решение. Но задача по распределению данных по датам ложится на пользователя компонента

Мы в задаче делаем именно третий вариант.

При выводе слота можно передавать в него все возможные параметры, которые могут понадобиться для вывода содержимого
ячейки.

```html
<div class="calendar-view__cell-content">
  <slot
    :timestamp="cell.timestamp"
    :year="cell.year"
    :month="cell.month"
    :date="cell.date"
    :inactive="!cell.isCurrentMonth"
  ></slot>
</div>
```

Тогда решение задачи сводится к выносу кода работы с митапами из компонента календаря в использование календаря. Для
этого потребуется при использовании компонента подготовить данные так, чтобы легко находить митапы определённой даты.

```js
computed: {
  meetupsByDate() {
    const result = {};
    for (const meetup of this.meetups) {
      if (!result[meetup.date]) {
        result[meetup.date] = [meetup];
      } else {
        result[meetup.date].push(meetup);
      }
    }
    return result;
  },
},
```

И останется только по этим данным вывести содержимое слота.

```html
<UiCalendarView v-slot="{ timestamp }">
  <UiCalendarEvent v-for="meetup in meetupsByDate[timestamp]" :key="meetup.id" tag="a" :href="`/meetups/${meetup.id}`">
    {{ meetup.title }}
  </UiCalendarEvent>
</UiCalendarView>
```
